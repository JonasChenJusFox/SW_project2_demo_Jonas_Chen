{% extends "base.html" %}

{% block title %}Home Â· LiftLog{% endblock %}

{% block content %}
  <section class="hero">
    <div class="hero__bg"></div>
    <div class="hero__content">
      <h1 class="hero__title">Make progress measurable.</h1>
      <p class="hero__subtitle">
        Track workouts + nutrition with clean data.
      </p>

      <div class="hero__actions">
        <a class="btn btn--primary" href="/workouts/new">+ Log Workout</a>
        <a class="btn btn--secondary" href="/diet/new">+ Log Meal</a>
      </div>
    </div>
  </section>

  <section class="grid">

    <!-- Today summary -->
    <article class="card">
      <div class="card__header">
        <h2 class="card__title">Today</h2>
        <span class="chip">Live</span>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="stat__label">Workouts</div>
          <div class="stat__value" id="stat-workouts">0</div>
        </div>
        <div class="stat">
          <div class="stat__label">Calories</div>
          <div class="stat__value" id="stat-calories">0</div>
        </div>
        <div class="stat">
          <div class="stat__label">Protein (g)</div>
          <div class="stat__value" id="stat-protein">0</div>
        </div>
      </div>

      <div class="card__footer">
        <a class="link" href="/diet">View diet â†’</a>
        <a class="link" href="/workouts">View workouts â†’</a>
      </div>
    </article>

    <!-- Recent workout -->
    <article class="card">
      <div class="card__header">
        <h2 class="card__title">Recent Workout</h2>
        <span class="chip chip--ghost">Last 7 days</span>
      </div>

      <div class="list" id="recent-workout-list">
        <div class="list__empty">No workouts yet. Log your first set.</div>
      </div>

      <div class="card__footer">
        <a class="btn btn--ghost" href="/workouts">Open workouts</a>
        <a class="btn btn--ghost" href="/timer">Rest timer</a>
      </div>
    </article>

    <!-- Quick tools -->
    <article class="card">
      <div class="card__header">
        <h2 class="card__title">Quick Tools</h2>
      </div>

      <div class="tool-row">
        <a class="tool" href="/workouts?view=search">
          <div class="tool__icon">ðŸ”Ž</div>
          <div class="tool__text">
            <div class="tool__title">Search lifts</div>
            <div class="tool__desc">Find exercise history fast</div>
          </div>
        </a>

        <a class="tool" href="/workouts/templates">
          <div class="tool__icon">ðŸ§©</div>
          <div class="tool__text">
            <div class="tool__title">Templates</div>
            <div class="tool__desc">Build your Push/Pull/Legs</div>
          </div>
        </a>
      </div>
    </article>
  </section>
{% endblock %}

{% block scripts %}
  <script>
    // use placeholder data.ï¼›will be changed fetch('/api/...') in the future
    const mock = {
      today: { workouts: 1, calories: 2150, protein: 145 },
      recent: [
        { date: "2026-02-19", name: "Bench Press", topSet: "8 reps @ 135" },
        { date: "2026-02-18", name: "Pull-up", topSet: "6 reps @ BW" },
      ]
    };

    document.getElementById("stat-workouts").textContent = mock.today.workouts;
    document.getElementById("stat-calories").textContent = mock.today.calories;
    document.getElementById("stat-protein").textContent = mock.today.protein;

    const list = document.getElementById("recent-workout-list");
    list.innerHTML = "";
    if (!mock.recent.length) {
      list.innerHTML = `<div class="list__empty">No workouts yet. Log your first set.</div>`;
    } else {
      mock.recent.forEach(item => {
        const row = document.createElement("div");
        row.className = "list__row";
        row.innerHTML = `
          <div class="list__left">
            <div class="list__title">${item.name}</div>
            <div class="list__meta">${item.date} Â· ${item.topSet}</div>
          </div>
          <div class="list__right">â€º</div>
        `;
        row.addEventListener("click", () => { window.location.href = "/workouts"; });
        list.appendChild(row);
      });
    }
  </script>
{% endblock %}